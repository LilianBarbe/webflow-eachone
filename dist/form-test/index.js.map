{
  "version": 3,
  "sources": ["../../bin/live-reload.js", "../../src/utils/findParams.ts", "../../src/utils/inputsMirror.js", "../../src/utils/redirectWithParams.ts", "../../src/utils/showHiddenFields.ts", "../../src/form-test/index.js"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "class ParamsToSearch {\n  currentURL: URL;\n  name: string;\n  inputAttr: string;\n  constructor(name: string, inputAttr: string) {\n    this.currentURL = new URL(window.location.href);\n    this.name = name;\n    this.inputAttr = inputAttr;\n  }\n  search() {\n    const input = document.querySelectorAll<HTMLInputElement>(`[${this.inputAttr}]`);\n    const val = this.currentURL.searchParams.get(this.name);\n    input.forEach((i) => {\n      if (val) i.value = val;\n    });\n  }\n}\n\nconst paramsToSearchArr = [\n  new ParamsToSearch(\"application_mail_address\", \"data-email\"),\n  new ParamsToSearch(\"application_prescribing_organisation\", \"data-orga\"),\n  new ParamsToSearch(\"campaign\", \"data-campaign\"),\n];\n\nexport const paramsSearch = function () {\n  paramsToSearchArr.forEach((param) => {\n    param.search();\n  });\n};\n", "// INPUT MIRROR\nclass inputMirror {\n  constructor() {\n    this.inputsA = Array.from(document.querySelectorAll(\"[data-mirror-a]\"));\n    this.inputsB = Array.from(document.querySelectorAll(\"[data-mirror-b]\"));\n\n    // Register the events\n    this.registerEvents();\n  }\n\n  // Register events\n  registerEvents() {\n    this.inputsA.forEach((input, index) => {\n      input.addEventListener(\"input\", (e) => {\n        this.inputsB[index].value = e.target.value;\n      });\n    });\n  }\n}\n\n// Create an instance of the class\nexport const inputsMirror = new inputMirror();\n", "// Objet URL\nconst currentURL: URL = new URL(window.location.href);\n// Params \u00E0 transporter\nconst paramsToKepp: string = currentURL.search;\n// Lien qui doivent conserver\nconst linkKeppParams = document.querySelectorAll<HTMLLinkElement>(\"[rel='keep-params']\");\n\n// Fonction de redirection\nexport const redirectLinks = function () {\n  // pour chaque lien\n  linkKeppParams.forEach((e) => {\n    // la redirection inclue les params\n    console.log(e);\n    console.log(paramsToKepp);\n    e.href = e.href + paramsToKepp;\n  });\n};\n\n// Fonction de redirection TEST\nexport const redirectLinksTest = function () {\n  // pour chaque lien\n  linkKeppParams.forEach((link) => {\n    // au click\n    link.addEventListener(\"click\", function (e) {\n      // on ne redirige pas\n      e.preventDefault();\n      // on inclue les params dans le lien\n      this.href = this.href + paramsToKepp;\n      // on log le lien\n      // eslint-disable-next-line no-console\n      console.log(this.href);\n    });\n  });\n};\n", "const hiddenInputs = document.querySelectorAll(\"div[data-hidden]\");\n\nexport const showHiddenInputs = function (decision: boolean) {\n  if (!decision) {\n    hiddenInputs.forEach(function (input) {\n      input.classList.add(\"display-none\");\n    });\n  }\n};\n", "// import\nimport { paramsSearch } from \"$utils/findParams.ts\";\nimport { inputsMirror } from \"$utils/inputsMirror.js\";\nimport { redirectLinksTest } from \"$utils/redirectWithParams.ts\";\nimport { showHiddenInputs } from \"$utils/showHiddenFields.ts\";\n\nexport function setupForms() {\n  // constuct\n  inputsMirror.registerEvents();\n  redirectLinksTest();\n  //\n\n  // functions\n  jQuery.extend(jQuery.validator.messages, {\n    required: \"Ce champ est requis\",\n    remote: \"votre message\",\n    email: \"Remplissez votre adresse email\",\n    url: \"votre message\",\n    date: \"Remplissez une date valide\",\n    dateISO: \"votre message\",\n    number: \"votre message\",\n    digits: \"votre message\",\n    creditcard: \"votre message\",\n    equalTo: \"votre message\",\n    accept: \"votre message\",\n    maxlength: jQuery.validator.format(\"Maximum {0} caract\u00E8res.\"),\n    minlength: jQuery.validator.format(\"Au moins {0} caract\u00E8res.\"),\n    rangelength: jQuery.validator.format(\"votre message  entre {0} et {1} caract\u00E9res.\"),\n    range: jQuery.validator.format(\"votre message  entre {0} et {1}.\"),\n    max: jQuery.validator.format(\"Votre message est inf\u00E9rieur ou \u00E9gal \u00E0 {0}.\"),\n    min: jQuery.validator.format(\"Votre message est sup\u00E9rieur ou \u00E9gal \u00E0 {0}.\"),\n  });\n\n  // function scrollToWrap(element) {\n  //   if (element) {\n  //     element.scrollIntoView({ behavior: \"smooth\", block: \"start\", inline: \"nearest\" });\n  //   }\n  // }\n\n  // method pour le code postal\n  jQuery.validator.addMethod(\n    \"customPostalCode\",\n    function (value, element) {\n      return this.optional(element) || /^[0-9]{1,5}$/gm.test(value);\n    },\n    \"Veuillez fournir un code postal valide.\"\n  );\n\n  // method pour la date\n  jQuery.validator.addMethod(\n    \"customDate\",\n    function (value, element) {\n      return (\n        this.optional(element) ||\n        /^(((0[1-9]|[12][0-9]|3[01])[- /.](0[13578]|1[02])|(0[1-9]|[12][0-9]|30)[- /.](0[469]|11)|(0[1-9]|1\\d|2[0-8])[- /.]02)[- /.]\\d{4}|29[- /.]02[- /.](\\d{2}(0[48]|[2468][048]|[13579][26])|([02468][048]|[1359][26])00))$/gm.test(\n          value\n        )\n      );\n    },\n    \"Veuillez fournir une date au format JJ/MM/AAAA.\"\n  );\n\n  // method pour le tel\n  // Ajout de la m\u00E9thode pour le champ num\u00E9ro de t\u00E9l\u00E9phone\n  jQuery.validator.addMethod(\n    \"customPhoneNumberWhatsApp\",\n    function (value, element) {\n      return (\n        this.optional(element) ||\n        /^\\s*\\+?((\\d{1,3}))?([-. (]*(\\d{3})[-. )]*)?((\\d{3})[-. ]*(\\d{2,4})(?:[-.x ]*(\\d+))?)\\s*$/gm.test(\n          value\n        )\n      );\n    },\n    \"Veuillez fournir un num\u00E9ro de t\u00E9l\u00E9phone valide commen\u00E7ant par '+'\"\n  );\n\n  // Ajout de la m\u00E9thode pour le champ num\u00E9ro de t\u00E9l\u00E9phone\n  jQuery.validator.addMethod(\n    \"customPhoneNumber\",\n    function (value, element) {\n      return (\n        this.optional(element) ||\n        /^\\s*(?:\\+?(\\d{1,3}))?([-. (]*(\\d{3})[-. )]*)?((\\d{3})[-. ]*(\\d{2,4})(?:[-.x ]*(\\d+))?)\\s*$/gm.test(\n          value\n        )\n      );\n    },\n    \"Veuillez fournir un num\u00E9ro de t\u00E9l\u00E9phone valide\"\n  );\n\n  // Ajout de la m\u00E9thode pour le champ email\n  jQuery.validator.addMethod(\n    \"customEmail\",\n    function (value, element) {\n      return (\n        this.optional(element) ||\n        /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/gm.test(\n          value\n        )\n      );\n    },\n    \"Veuillez fournir une adresse e-mail valide.\"\n  );\n\n  document.addEventListener(\"DOMContentLoaded\", function () {\n    const sectionForm = document.querySelectorAll(\"[form-component]\");\n\n    sectionForm.forEach(function (section) {\n      const form = section.querySelector(\"form[form-element]\");\n      const formID = section.querySelector(\"form[form-element]\").id;\n      const inputsStep1 = form.querySelectorAll(\".fieldset.is-1 input\");\n      const step1 = form.querySelector(\".fieldset.is-1\");\n      const inputsStep2 = form.querySelectorAll(\".fieldset.is-2 input, .fieldset.is-2 select\");\n      const step2 = form.querySelector(\".fieldset.is-2\");\n      const btnStep1 = form.querySelector(\".msf-button\");\n      const btnStep2 = form.querySelector(\".msf-button.is-submit\");\n      const btnSubmit = form.querySelector(\"[submit-btn]\");\n      const btnSubmitMirror = document.querySelector(\"[data-submit-mirror]\");\n\n      var validator = $(`#${formID}`).validate({\n        debug: false,\n        rules: {\n          application_form_mail_address: {\n            required: true,\n            customEmail: true,\n          },\n          select: {\n            // applique la r\u00E8gle \u00E0 tous les selects\n            required: true,\n          },\n          application_form_habitation_postcode: {\n            //Assumer que \"postalCode\" est le name de votre champ code postal\n            required: true,\n            customPostalCode: true,\n            maxlength: 5,\n          },\n          application_form_birth_date: {\n            customDate: true,\n            maxlength: 10,\n          },\n          application_form_whatsapp_phone_number: {\n            required: true,\n            customPhoneNumberWhatsApp: true,\n          },\n          application_form_phone_number: {\n            required: true,\n            customPhoneNumber: true,\n            minlength: 10,\n          },\n        },\n      });\n\n      // verifier les inputs\n      const verifyInputs = function (inputs) {\n        // function avec des inputs en params\n        let allValid = true;\n        // initialisation \u00E0 vrai\n        inputs.forEach(function (input) {\n          // pour chaque input\n          let result = validator.element(input);\n          if (!result) {\n            allValid = false; // Si un test \u00E9choue, modifiez la valeur \u00E0 false\n          }\n        });\n        return allValid; // Retourner la valeur finale\n      };\n\n      //// dev\n      inputsStep1.forEach(function (input) {\n        input.value = \"sthsrythsrthsr@luigh\";\n      });\n\n      // display step 2\n      const displayStep2 = function () {\n        step1.classList.add(\"display-none\");\n        step2.classList.remove(\"display-none\");\n        btnStep1.classList.add(\"display-none\");\n        btnStep2.classList.remove(\"display-none\");\n      };\n\n      // display step 1\n      const displayStep1 = function () {\n        step1.classList.remove(\"display-none\");\n        step2.classList.add(\"display-none\");\n        btnStep1.classList.remove(\"display-none\");\n        btnStep2.classList.add(\"display-none\");\n      };\n\n      // step 1\n      step2.classList.add(\"display-none\");\n      btnStep1.addEventListener(\"click\", function () {\n        let isStepOneValid = verifyInputs(inputsStep1);\n        // console.log(`Inputs step 1 valide : ${isStepOneValid}`);\n        if (isStepOneValid) {\n          displayStep2();\n          btnSubmitMirror.click();\n        }\n      });\n\n      // step 2\n      btnStep2.addEventListener(\"click\", function () {\n        let isStepTwoValid = verifyInputs(inputsStep2);\n        // console.log(`Inputs step 2 valide : ${isStepTwoValid}`);\n        if (isStepTwoValid) {\n          btnSubmit.click();\n        }\n      });\n    });\n  });\n\n  // rechercher les params\n  paramsSearch();\n\n  // cacher les champs cacher\n  showHiddenInputs(false);\n\n  // modifier la question prescribing\n  function paramsHas(param) {\n    const currentURL = new URL(window.location.href);\n    return currentURL.searchParams.has(param);\n  }\n}\n\n// if (!paramsHas(\"prescribing-organisation\")) {\n//   document.querySelectoAll(\"[prescribing-wrap]\").style.display = \"block\";\n//   document.querySelectoAll(\"[prescribing-wrap] input\").rules(\"add\", {\n//     required: true,\n//   });\n// } else {\n//   document.querySelectoAll(\"[prescribing-wrap]\").style.display = \"none\";\n// }\n"],
  "mappings": "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",
  "names": ["currentURL"]
}
